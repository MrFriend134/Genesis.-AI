:root{
  --deep-black:#070a0f;
  --deep-black-2:#0b1020;
  --panel:#0c1326;
  --panel-2:#0b1630;
  --glass:rgba(12,19,38,.64);
  --glass-2:rgba(9,14,28,.42);
  --stroke:rgba(120,255,255,.14);
  --stroke-2:rgba(120,255,255,.08);
  --cyan-neon:#49fff5;
  --cyan-neon-2:#00e5ff;
  --blue-neon:#6ea8ff;
  --warning-red:#ff3b6b;
  --warn:#ff5c7a;
  --ok:#2dff9f;
  --text:#e7f7ff;
  --muted:rgba(231,247,255,.72);
  --muted-2:rgba(231,247,255,.52);
  --shadow:0 22px 70px rgba(0,0,0,.55);
  --shadow-2:0 14px 40px rgba(0,0,0,.44);
  --radius:18px;
  --radius-2:12px;
  --radius-3:10px;
  --grid:rgba(73,255,245,.08);
  --grid-2:rgba(73,255,245,.04);
  --focus:rgba(73,255,245,.55);
  --danger:rgba(255,59,107,.95);
  --danger-2:rgba(255,59,107,.35);
  --ok-2:rgba(45,255,159,.25);
  --topbar-h:72px;
  --sidebar-w:320px;
  --sidebar-w-collapsed:76px;
  --gap:14px;
  --font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  color:var(--text);
  background:
    radial-gradient(800px 480px at 20% -10%, rgba(0,229,255,.16), transparent 60%),
    radial-gradient(700px 440px at 90% 0%, rgba(110,168,255,.16), transparent 62%),
    radial-gradient(520px 340px at 40% 110%, rgba(255,59,107,.08), transparent 60%),
    linear-gradient(180deg, var(--deep-black) 0%, #040611 100%);
  overflow:hidden;
}

a{color:inherit}

.skip-link{
  position:absolute;
  left:12px;
  top:-40px;
  padding:10px 12px;
  border:1px solid var(--stroke);
  border-radius:10px;
  background:rgba(0,0,0,.7);
  z-index:9999;
  transition:top .18s ease;
}
.skip-link:focus{top:12px; outline:none; box-shadow:0 0 0 3px var(--focus)}

.sr-only{
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  border:0;
}

.app{
  height:100%;
  width:100%;
  position:relative;
}

.app::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    linear-gradient(var(--grid) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid) 1px, transparent 1px);
  background-size:60px 60px;
  opacity:.25;
  mask-image:radial-gradient(ellipse at center, black 35%, transparent 70%);
}

.app::after{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background:
    radial-gradient(900px 600px at 40% 20%, rgba(73,255,245,.10), transparent 62%),
    radial-gradient(900px 600px at 70% 80%, rgba(110,168,255,.10), transparent 64%);
  mix-blend-mode:screen;
  opacity:.9;
}

.topbar{
  height:var(--topbar-h);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 14px;
  position:relative;
  z-index:10;
  background:linear-gradient(180deg, rgba(13,18,32,.78), rgba(8,12,22,.38));
  border-bottom:1px solid var(--stroke);
  backdrop-filter:blur(18px);
}

.topbar-left{display:flex; align-items:center; gap:10px; min-width:260px}
.topbar-center{display:flex; align-items:center; gap:12px; justify-content:center; flex:1}
.topbar-right{display:flex; align-items:center; gap:10px; min-width:220px; justify-content:flex-end}

.brand{display:flex; align-items:center; gap:10px}
.brand-mark{color:var(--cyan-neon)}
.brand-title{font-weight:780; letter-spacing:.08em}
.brand-sub{font-size:12px; color:var(--muted); margin-top:2px}

.stat{
  padding:8px 10px;
  border-radius:12px;
  border:1px solid var(--stroke-2);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.25);
  min-width:110px;
}
.stat-label{font-size:11px; color:var(--muted-2); letter-spacing:.06em; text-transform:uppercase}
.stat-value{font-family:var(--mono); font-size:13px; margin-top:4px}
.stat-value[data-state="ready"]{color:var(--ok)}
.stat-value[data-state="needs_key"]{color:var(--warn)}
.stat-value[data-state="error"]{color:var(--warning-red)}

.layout{
  height:calc(100% - var(--topbar-h));
  display:flex;
  position:relative;
  z-index:5;
}

.sidebar{
  width:var(--sidebar-w);
  border-right:1px solid var(--stroke);
  background:linear-gradient(180deg, rgba(13,18,32,.70), rgba(7,10,15,.52));
  backdrop-filter:blur(18px);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  transition:width .22s ease, transform .22s ease;
}

.sidebar[data-collapsed="true"]{width:var(--sidebar-w-collapsed)}

.sidebar-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 14px 10px;
  border-bottom:1px solid var(--stroke-2);
}

.sidebar-title{font-weight:780; letter-spacing:.06em}
.sidebar-actions{display:flex; align-items:center; gap:8px}

.sidebar-search{padding:12px 14px; border-bottom:1px solid var(--stroke-2)}

.session-list{
  flex:1;
  overflow:auto;
  padding:10px 10px 14px;
}

.sidebar-footer{padding:12px 14px; border-top:1px solid var(--stroke-2)}

.mini-card{
  border:1px solid var(--stroke-2);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border-radius:14px;
  padding:12px;
}
.mini-title{font-weight:740; margin-bottom:6px}
.mini-body{font-size:12px; color:var(--muted)}

.main{flex:1; min-width:0; overflow:hidden}

.chat{height:100%; display:flex; flex-direction:column; min-width:0}

.chat-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  padding:14px 16px;
  border-bottom:1px solid var(--stroke-2);
  background:linear-gradient(180deg, rgba(9,14,28,.55), rgba(9,14,28,.25));
  backdrop-filter:blur(14px);
}

.chat-meta{min-width:0}
.chat-title{display:flex; align-items:center; gap:10px; min-width:0}
.chat-title-text{font-weight:820; letter-spacing:.05em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:52vw}
.chat-sub{margin-top:6px; font-size:12px; color:var(--muted)}

.chat-header-actions{display:flex; align-items:center; gap:10px; padding-top:2px}

.chip{
  font-family:var(--mono);
  font-size:12px;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid var(--stroke-2);
  color:var(--muted);
  background:rgba(255,255,255,.03);
}

.chat-body{
  flex:1;
  overflow:auto;
  padding:16px;
  position:relative;
}

.chat-empty{
  border:1px dashed rgba(73,255,245,.22);
  background:linear-gradient(180deg, rgba(73,255,245,.06), rgba(255,255,255,.01));
  border-radius:var(--radius);
  padding:26px;
  max-width:720px;
  margin:20px auto 0;
  text-align:center;
}

.chat-empty-title{font-weight:860; letter-spacing:.08em; margin-top:14px}
.chat-empty-sub{font-size:13px; color:var(--muted); margin-top:6px; line-height:1.5}

.message-list{
  display:flex;
  flex-direction:column;
  gap:12px;
  max-width:980px;
  margin:0 auto;
}

.message{
  border:1px solid var(--stroke-2);
  border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.24);
  overflow:hidden;
}

.message[data-role="user"]{
  border-color:rgba(110,168,255,.18);
  background:linear-gradient(180deg, rgba(110,168,255,.08), rgba(255,255,255,.01));
}

.message[data-role="assistant"]{
  border-color:rgba(73,255,245,.18);
  background:linear-gradient(180deg, rgba(73,255,245,.08), rgba(255,255,255,.01));
}

.message-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-bottom:1px solid var(--stroke-2);
  background:rgba(0,0,0,.14);
}

.message-who{display:flex; align-items:center; gap:10px}

.badge{
  font-size:11px;
  letter-spacing:.08em;
  text-transform:uppercase;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid var(--stroke-2);
  background:rgba(255,255,255,.02);
  color:var(--muted);
}

.badge[data-kind="user"]{border-color:rgba(110,168,255,.32); color:rgba(190,220,255,.9)}
.badge[data-kind="assistant"]{border-color:rgba(73,255,245,.30); color:rgba(190,255,250,.95)}

.timestamp{font-family:var(--mono); font-size:11px; color:var(--muted-2)}

.message-body{
  padding:12px 14px 14px;
  line-height:1.6;
  color:rgba(231,247,255,.92);
}

.message-body p{margin:0 0 10px}
.message-body p:last-child{margin-bottom:0}

.message-body strong{color:#ffffff}

.message-body code{
  font-family:var(--mono);
  font-size:12px;
  padding:2px 6px;
  border-radius:8px;
  border:1px solid rgba(73,255,245,.20);
  background:rgba(0,0,0,.28);
}

.message-body pre{
  margin:12px 0;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(73,255,245,.20);
  background:rgba(0,0,0,.32);
  overflow:auto;
}

.message-body pre code{
  border:none;
  background:transparent;
  padding:0;
  display:block;
  font-size:12px;
}

.message-body ul,
.message-body ol{
  margin:10px 0 10px 20px;
  padding:0;
}

.message-body li{margin:6px 0}

.typing{
  max-width:980px;
  margin:10px auto 0;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid var(--stroke-2);
  background:rgba(0,0,0,.18);
  width:max-content;
  opacity:0;
  transform:translateY(6px);
  transition:opacity .18s ease, transform .18s ease;
}

.typing[data-show="true"]{opacity:1; transform:translateY(0)}

.typing-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  background:var(--cyan-neon);
  box-shadow:0 0 18px rgba(73,255,245,.35);
  animation:typingDot 1.2s ease-in-out infinite;
}

.typing-dot:nth-child(2){animation-delay:.12s; opacity:.85}
.typing-dot:nth-child(3){animation-delay:.24s; opacity:.7}

.typing-text{font-size:12px; color:var(--muted)}

@keyframes typingDot{
  0%,100%{transform:translateY(0); opacity:.35}
  40%{transform:translateY(-4px); opacity:1}
}

.composer{
  border-top:1px solid var(--stroke-2);
  background:linear-gradient(180deg, rgba(9,14,28,.32), rgba(9,14,28,.62));
  backdrop-filter:blur(16px);
  padding:12px 14px 10px;
}

.composer-form{
  display:flex;
  align-items:flex-end;
  gap:10px;
}

.composer-left{
  width:40px;
  padding:10px 0;
  display:flex;
  justify-content:center;
  align-items:center;
}

.signal{display:flex; align-items:flex-end; gap:4px; height:20px}
.signal-bar{
  width:4px;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(73,255,245,1), rgba(73,255,245,.2));
  box-shadow:0 0 16px rgba(73,255,245,.25);
  animation:signalPulse 1.6s ease-in-out infinite;
}
.signal-bar:nth-child(1){height:8px; animation-delay:0s; opacity:.55}
.signal-bar:nth-child(2){height:14px; animation-delay:.12s; opacity:.8}
.signal-bar:nth-child(3){height:10px; animation-delay:.24s; opacity:.68}

@keyframes signalPulse{
  0%,100%{transform:scaleY(.9); filter:saturate(1)}
  50%{transform:scaleY(1.25); filter:saturate(1.25)}
}

.composer-input-wrap{flex:1; min-width:0}

.composer-input{
  width:100%;
  resize:none;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid rgba(73,255,245,.18);
  background:rgba(0,0,0,.28);
  color:var(--text);
  outline:none;
  min-height:46px;
  max-height:180px;
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.20);
  transition:border-color .16s ease, box-shadow .16s ease, transform .16s ease;
}

.composer-input:focus{
  border-color:rgba(73,255,245,.42);
  box-shadow:0 0 0 3px var(--focus), inset 0 0 0 1px rgba(0,0,0,.2);
}

.composer-actions{display:flex; gap:10px}

.composer-hints{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding-top:10px;
}

.hint{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px}
.hint-kbd{
  font-family:var(--mono);
  font-size:11px;
  padding:3px 7px;
  border-radius:8px;
  border:1px solid var(--stroke-2);
  background:rgba(255,255,255,.03);
}

.hint-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  background:var(--warning-red);
  box-shadow:0 0 14px rgba(255,59,107,.32);
  animation:pulse 1.4s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(.92); opacity:.55}
  40%{transform:scale(1.22); opacity:1}
}

.icon-btn,
.ghost-btn,
.primary-btn,
.pill-btn,
.danger-btn,
.linklike{
  -webkit-tap-highlight-color:transparent;
}

.icon-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:42px;
  height:42px;
  border-radius:14px;
  border:1px solid var(--stroke-2);
  background:rgba(255,255,255,.03);
  color:var(--text);
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

.icon-btn:hover{transform:translateY(-1px); border-color:rgba(73,255,245,.28); background:rgba(73,255,245,.04)}
.icon-btn:active{transform:translateY(0)}
.icon-btn:focus{outline:none; box-shadow:0 0 0 3px var(--focus)}

.pill-btn{
  display:inline-flex;
  align-items:center;
  gap:10px;
  height:42px;
  padding:0 14px;
  border-radius:999px;
  border:1px solid rgba(73,255,245,.26);
  background:linear-gradient(180deg, rgba(73,255,245,.10), rgba(0,0,0,.12));
  color:var(--text);
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

.pill-btn:hover{transform:translateY(-1px); border-color:rgba(73,255,245,.40); box-shadow:0 10px 30px rgba(0,0,0,.22)}
.pill-btn:active{transform:translateY(0)}
.pill-btn:focus{outline:none; box-shadow:0 0 0 3px var(--focus)}

.primary-btn{
  display:inline-flex;
  align-items:center;
  gap:10px;
  height:44px;
  padding:0 16px;
  border-radius:14px;
  border:1px solid rgba(73,255,245,.45);
  background:linear-gradient(180deg, rgba(73,255,245,.18), rgba(0,0,0,.20));
  color:#eaffff;
  cursor:pointer;
  font-weight:740;
  letter-spacing:.04em;
  transition:transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

.primary-btn:hover{transform:translateY(-1px); border-color:rgba(73,255,245,.70); box-shadow:0 0 0 3px rgba(73,255,245,.16)}
.primary-btn:active{transform:translateY(0)}
.primary-btn:focus{outline:none; box-shadow:0 0 0 3px var(--focus)}

.ghost-btn{
  display:inline-flex;
  align-items:center;
  gap:10px;
  height:40px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid var(--stroke-2);
  background:rgba(255,255,255,.02);
  color:var(--text);
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease, background .15s ease;
}

.ghost-btn:hover{transform:translateY(-1px); border-color:rgba(110,168,255,.28); background:rgba(110,168,255,.04)}
.ghost-btn:active{transform:translateY(0)}
.ghost-btn:focus{outline:none; box-shadow:0 0 0 3px var(--focus)}

.danger-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:44px;
  padding:0 14px;
  border-radius:14px;
  border:1px solid rgba(255,59,107,.45);
  background:linear-gradient(180deg, rgba(255,59,107,.12), rgba(0,0,0,.18));
  color:#ffeef3;
  cursor:pointer;
  font-weight:740;
  transition:transform .15s ease, border-color .15s ease, background .15s ease;
}

.danger-btn:hover{transform:translateY(-1px); border-color:rgba(255,59,107,.7); background:rgba(255,59,107,.12)}
.danger-btn:active{transform:translateY(0)}
.danger-btn:focus{outline:none; box-shadow:0 0 0 3px rgba(255,59,107,.35)}

.linklike{
  background:none;
  border:none;
  color:var(--cyan-neon);
  font:inherit;
  padding:0;
  cursor:pointer;
  text-decoration:underline;
  text-underline-offset:3px;
}

.linklike:hover{color:#b8fffb}
.linklike:focus{outline:none; box-shadow:0 0 0 3px var(--focus); border-radius:10px}

.field{display:flex; flex-direction:column; gap:8px}
.field-label{font-size:12px; color:var(--muted-2); letter-spacing:.06em; text-transform:uppercase}
.field-help{font-size:12px; color:var(--muted); line-height:1.4}

.input{
  height:44px;
  border-radius:14px;
  border:1px solid rgba(73,255,245,.16);
  background:rgba(0,0,0,.22);
  color:var(--text);
  padding:0 12px;
  outline:none;
  transition:border-color .16s ease, box-shadow .16s ease;
}

.input:focus{border-color:rgba(73,255,245,.42); box-shadow:0 0 0 3px var(--focus)}

.range-row{display:flex; align-items:center; gap:12px}
.range{flex:1}
.range-out{font-family:var(--mono); font-size:12px; color:var(--muted)}

.session-item{
  display:flex;
  gap:10px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(73,255,245,.10);
  background:rgba(255,255,255,.02);
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease, background .15s ease;
}

.session-item:hover{transform:translateY(-1px); border-color:rgba(73,255,245,.28); background:rgba(73,255,245,.04)}
.session-item:active{transform:translateY(0)}

.session-item[data-active="true"]{
  border-color:rgba(73,255,245,.42);
  background:linear-gradient(180deg, rgba(73,255,245,.08), rgba(255,255,255,.01));
  box-shadow:0 0 0 2px rgba(73,255,245,.10);
}

.session-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  background:rgba(73,255,245,.65);
  box-shadow:0 0 18px rgba(73,255,245,.22);
  margin-top:5px;
  flex:none;
}

.session-main{min-width:0; flex:1}
.session-title{font-weight:760; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.session-sub{font-size:12px; color:var(--muted); margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

.modal{
  position:fixed;
  inset:0;
  z-index:50;
  display:none;
}

.modal[data-open="true"]{display:block}

.modal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(6px);
  animation:fadeIn .18s ease both;
}

@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.modal-card{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:min(980px, calc(100% - 24px));
  max-height:calc(100% - 24px);
  overflow:auto;
  border-radius:var(--radius);
  border:1px solid rgba(73,255,245,.18);
  background:linear-gradient(180deg, rgba(12,19,38,.82), rgba(7,10,15,.64));
  box-shadow:var(--shadow);
  animation:modalRise .18s ease both;
}

@keyframes modalRise{from{opacity:0; transform:translate(-50%,-48%) scale(.98)}to{opacity:1; transform:translate(-50%,-50%) scale(1)}}

.modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px;
  border-bottom:1px solid var(--stroke-2);
}

.modal-title{font-weight:860; letter-spacing:.06em}

.modal-body{padding:16px}
.modal-footer{padding:14px 16px; border-top:1px solid var(--stroke-2); display:flex; justify-content:flex-end}

.settings-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
.settings-col{
  border:1px solid var(--stroke-2);
  border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  padding:14px;
}

.section-title{font-weight:820; letter-spacing:.06em; margin-bottom:12px}

.inline-actions{display:flex; gap:10px; margin-top:10px}
.stack-actions{display:flex; flex-direction:column; gap:10px}

.divider{height:1px; background:var(--stroke-2); margin:14px 0}

.diag-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.diag-card{
  border:1px solid var(--stroke-2);
  border-radius:14px;
  padding:12px;
  background:rgba(0,0,0,.18);
}

.diag-k{font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:var(--muted-2)}
.diag-v{font-family:var(--mono); margin-top:8px; color:rgba(231,247,255,.9)}

.notice{
  margin-top:12px;
  border:1px solid rgba(255,59,107,.25);
  background:linear-gradient(180deg, rgba(255,59,107,.06), rgba(0,0,0,.10));
  border-radius:14px;
  padding:12px;
}

.notice-title{font-weight:820; color:#fff1f5}
.notice-body{font-size:12px; color:rgba(255,240,245,.84); margin-top:6px; line-height:1.5}

.toast-region{
  position:fixed;
  right:14px;
  bottom:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:80;
  width:min(420px, calc(100% - 28px));
}

.toast{
  border:1px solid var(--stroke-2);
  border-radius:16px;
  background:linear-gradient(180deg, rgba(12,19,38,.85), rgba(7,10,15,.70));
  box-shadow:var(--shadow-2);
  padding:12px;
  display:flex;
  align-items:flex-start;
  gap:10px;
  animation:toastIn .20s ease both;
}

@keyframes toastIn{from{opacity:0; transform:translateY(8px)}to{opacity:1; transform:translateY(0)}}

.toast-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  margin-top:6px;
  background:var(--cyan-neon);
  box-shadow:0 0 16px rgba(73,255,245,.26);
  flex:none;
}

.toast-dot[data-tone="warn"]{background:var(--warning-red); box-shadow:0 0 16px rgba(255,59,107,.26)}
.toast-dot[data-tone="ok"]{background:var(--ok); box-shadow:0 0 16px rgba(45,255,159,.22)}

.toast-main{flex:1; min-width:0}
.toast-title{font-weight:820; letter-spacing:.04em}
.toast-body{font-size:12px; color:var(--muted); margin-top:6px; line-height:1.45}

.toast-close{
  width:32px;
  height:32px;
  border-radius:12px;
  border:1px solid var(--stroke-2);
  background:rgba(255,255,255,.02);
  color:var(--text);
  cursor:pointer;
  transition:transform .15s ease, border-color .15s ease, background .15s ease;
}

.toast-close:hover{transform:translateY(-1px); border-color:rgba(73,255,245,.28); background:rgba(73,255,245,.04)}
.toast-close:active{transform:translateY(0)}

.avatar{
  width:86px;
  height:86px;
  border-radius:999px;
  margin:0 auto;
  position:relative;
  display:grid;
  place-items:center;
  color:var(--cyan-neon);
}

.avatar-ring{
  position:absolute;
  inset:-2px;
  border-radius:999px;
  background:conic-gradient(from 90deg, rgba(73,255,245,0), rgba(73,255,245,.55), rgba(73,255,245,0));
  filter:blur(.1px);
  animation:avatarSpin 4.6s linear infinite;
  opacity:.85;
}

@keyframes avatarSpin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

.avatar-core{
  width:64px;
  height:64px;
  border-radius:999px;
  border:1px solid rgba(73,255,245,.25);
  background:radial-gradient(circle at 30% 30%, rgba(73,255,245,.12), rgba(0,0,0,.25));
  display:grid;
  place-items:center;
  box-shadow:inset 0 0 0 1px rgba(0,0,0,.28);
  animation:avatarPulse 1.8s ease-in-out infinite;
}

@keyframes avatarPulse{
  0%,100%{transform:scale(1); box-shadow:0 0 0 0 rgba(73,255,245,.16), inset 0 0 0 1px rgba(0,0,0,.28)}
  50%{transform:scale(1.05); box-shadow:0 0 0 10px rgba(73,255,245,.05), inset 0 0 0 1px rgba(0,0,0,.28)}
}

.boot-overlay{
  position:fixed;
  inset:0;
  z-index:90;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(900px 600px at 50% 40%, rgba(73,255,245,.09), rgba(0,0,0,.80));
  backdrop-filter:blur(8px);
  animation:bootFade 1.2s ease both;
}

.boot-overlay[data-hide="true"]{pointer-events:none; opacity:0; transition:opacity .35s ease}

@keyframes bootFade{from{opacity:0}to{opacity:1}}

.boot-card{
  width:min(720px, calc(100% - 24px));
  border-radius:var(--radius);
  border:1px solid rgba(73,255,245,.20);
  background:linear-gradient(180deg, rgba(12,19,38,.90), rgba(7,10,15,.70));
  box-shadow:var(--shadow);
  overflow:hidden;
  position:relative;
}

.boot-grid{
  position:absolute;
  inset:0;
  background:
    linear-gradient(var(--grid-2) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-2) 1px, transparent 1px);
  background-size:34px 34px;
  opacity:.60;
  animation:bootGrid 2.2s linear infinite;
  mask-image:radial-gradient(circle at center, black 35%, transparent 75%);
}

@keyframes bootGrid{
  from{transform:translate3d(0,0,0)}
  to{transform:translate3d(-34px,-34px,0)}
}

.boot-header{
  position:relative;
  padding:18px 18px 12px;
  display:flex;
  align-items:center;
  gap:14px;
  border-bottom:1px solid var(--stroke-2);
}

.boot-logo{color:var(--cyan-neon)}
.boot-name{font-weight:900; letter-spacing:.14em}
.boot-sub{font-size:12px; color:var(--muted); margin-top:4px}

.boot-body{position:relative; padding:16px 18px 18px}
.boot-lines{font-family:var(--mono); font-size:12px; color:rgba(231,247,255,.8)}
.boot-line{padding:4px 0; display:flex; gap:10px}
.boot-line .k{color:var(--ok)}
.boot-line:nth-child(4) .k{color:var(--warn)}

.boot-progress{
  height:10px;
  border-radius:999px;
  border:1px solid rgba(73,255,245,.18);
  background:rgba(0,0,0,.25);
  overflow:hidden;
  margin-top:14px;
}

.boot-progress-bar{
  height:100%;
  width:56%;
  background:linear-gradient(90deg, rgba(73,255,245,.0), rgba(73,255,245,.65), rgba(73,255,245,.0));
  filter:drop-shadow(0 0 8px rgba(73,255,245,.25));
  animation:bootBar 1.25s ease-in-out infinite;
}

@keyframes bootBar{
  0%{transform:translateX(-60%)}
  50%{transform:translateX(40%)}
  100%{transform:translateX(140%)}
}

.boot-hint{margin-top:14px; color:var(--muted); font-size:12px}

.session-list::-webkit-scrollbar,
.chat-body::-webkit-scrollbar,
.modal-card::-webkit-scrollbar{
  width:10px;
  height:10px;
}

.session-list::-webkit-scrollbar-track,
.chat-body::-webkit-scrollbar-track,
.modal-card::-webkit-scrollbar-track{
  background:rgba(0,0,0,.26);
  border-radius:999px;
}

.session-list::-webkit-scrollbar-thumb,
.chat-body::-webkit-scrollbar-thumb,
.modal-card::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(73,255,245,.22), rgba(110,168,255,.18));
  border:1px solid rgba(73,255,245,.16);
  border-radius:999px;
}

.session-list::-webkit-scrollbar-thumb:hover,
.chat-body::-webkit-scrollbar-thumb:hover,
.modal-card::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(73,255,245,.30), rgba(110,168,255,.22));
}

@media (max-width: 980px){
  .topbar-center{display:none}
  .chat-title-text{max-width:58vw}
  .settings-grid{grid-template-columns:1fr}
}

@media (max-width: 820px){
  body{overflow:hidden}
  .sidebar{
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    height:100%;
    z-index:25;
    transform:translateX(0);
    box-shadow:var(--shadow);
  }
  .sidebar[data-mobile-hidden="true"]{transform:translateX(-102%)}
  .main{width:100%}
  .topbar-left{min-width:200px}
  .topbar-right{min-width:160px}
}

@media (max-width: 520px){
  :root{--topbar-h:68px}
  .brand-sub{display:none}
  .pill-text{display:none}
  .pill-btn{padding:0 12px}
  .chat-header{flex-direction:column; gap:10px}
  .chat-header-actions{width:100%; justify-content:flex-end}
  .composer-hints{flex-wrap:wrap; justify-content:flex-start}
}
